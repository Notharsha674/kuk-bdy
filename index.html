<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            margin: 0; padding: 0; background: #000814; color: white; 
            font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100%; width: 100%;
        }
        
        /* Individual Page Styles */
        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; text-align: center; padding: 30px;
            opacity: 0; visibility: hidden; z-index: 10;
        }
        .active { opacity: 1; visibility: visible; }

        /* Saturn Video Background */
        #video-bg {
            position: fixed; top: 50%; left: 50%; min-width: 100%; min-height: 100%;
            width: auto; height: auto; transform: translate(-50%, -50%);
            z-index: -1; opacity: 0.5; object-fit: cover; display: none;
        }

        /* Dino & Speech Bubble */
        #dino-guide { position: fixed; bottom: 20px; right: 20px; width: 85px; z-index: 100; display: none; border-radius: 10px; }
        .bubble { 
            position: fixed; bottom: 115px; right: 20px; 
            background: white; color: black; padding: 12px; 
            border-radius: 15px; font-size: 0.8rem; 
            width: 160px; display: none; z-index: 100; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        /* Volleyball Game Elements */
        #vball {
            position: absolute; width: 65px; height: 65px;
            cursor: pointer; display: none; z-index: 60;
            filter: drop-shadow(0 0 10px #ffd700);
        }
        #score-board {
            position: absolute; top: 40px; font-size: 1.2rem; color: #ffd700;
            display: none; z-index: 70; font-weight: bold; letter-spacing: 1px;
        }

        /* Letter Image Styling */
        #letter-img { 
            max-width: 100%; max-height: 65vh; 
            border: 5px solid white; border-radius: 4px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        .lotus-btn { width: 80px; cursor: pointer; filter: drop-shadow(0 0 15px #ffd700); transition: 0.3s; }
        .lotus-btn:active { transform: scale(0.9); }
        
        .tap-hint { position: absolute; bottom: 40px; font-size: 0.75rem; color: #ffd700; opacity: 0.6; }

        /* Snow Effect */
        .snowflake { position: fixed; top: -10px; color: white; pointer-events: none; z-index: 50; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh); } }
    </style>
</head>
<body onclick="handleTap()">

    <audio id="bdy-song" src="Yellow.mp3"></audio>
    <video id="video-bg" loop muted playsinline>
        <source src="saturn_video.mp4" type="video/mp4">
    </video>

    <div id="score-board">HITS: <span id="hits">0</span>/5</div>
    <img id="vball" src="https://img.icons8.com/color/96/volleyball.png" onclick="event.stopPropagation(); hitBall()">
    <img id="dino-guide" src="dino.jpg">
    <div id="speech" class="bubble"></div>

    <div id="p0" class="page active" style="background: #2b3a67; z-index: 200;">
        <img src="https://img.icons8.com/ios/100/ffd700/lotus.png" class="lotus-btn" onclick="event.stopPropagation(); startJourney()">
        <h2 style="color: #ffd700; margin-top: 20px;">For the Brightest Star</h2>
        <p style="font-size: 0.9rem; opacity: 0.8;">Tap the Lotus to Begin</p>
    </div>

    <div id="p1" class="page">
        <h1 style="color: #ffd700; font-size: 2rem;">Look at the stars...</h1>
        <p style="font-size: 1.1rem;">They shine for a special Libra today.</p>
        <div class="tap-hint">Tap to continue</div>
    </div>

    <div id="p2" class="page">
        <h2 style="color: #ffd700;">Volleyball Time!</h2>
        <p>Keep the ball up 5 times to unlock your gift.</p>
    </div>

    <div id="p3" class="page">
        <img id="letter-img" src="letter.jpg">
        <p style="margin-top: 15px; font-style: italic; font-size: 0.8rem;">Happy Birthday.</p>
    </div>

    <script>
        let currentPage = 0;
        let hits = 0;
        let ballY = 0;
        let ballX = 50;
        let gameActive = false;

        function startJourney() {
            document.getElementById('bdy-song').play();
            document.getElementById('video-bg').style.display = 'block';
            document.getElementById('video-bg').play();
            createSnow();
            nextPage();
        }

        function handleTap() {
            // Only allow tap to advance on pages that aren't the game or intro
            if (currentPage === 1) nextPage();
        }

        function nextPage() {
            document.getElementById('p' + currentPage).classList.remove('active');
            currentPage++;
            const nextP = document.getElementById('p' + currentPage);
            nextP.classList.add('active');
            gsap.from(nextP, { opacity: 0, y: 20, duration: 1 });

            const mascot = document.getElementById('dino-guide');
            const bubble = document.getElementById('speech');
            mascot.style.display = 'block';
            bubble.style.display = 'block';

            if(currentPage === 1) bubble.innerText = "Hey! Happy Birthday! I'm your Dino-guide. Let's explore!";
            if(currentPage === 2) {
                bubble.innerText = "Ready? Tap the ball to keep it in the air!";
                setTimeout(startBallGame, 1500);
            }
            if(currentPage === 3) bubble.innerText = "Nice job! You win. Here is your letter... take care 恐竜.";
        }

        function startBallGame() {
            gameActive = true;
            document.getElementById('vball').style.display = 'block';
            document.getElementById('score-board').style.display = 'block';
            ballY = 20;
            ballX = 50;
            animateBall();
        }

        function animateBall() {
            if(!gameActive) return;
            ballY += 0.8; // Gravity
            const ball = document.getElementById('vball');
            ball.style.top = ballY + "%";
            ball.style.left = ballX + "%";

            if(ballY > 85) { // Reset if missed
                ballY = 20;
                ballX = Math.random() * 60 + 20;
            }
            requestAnimationFrame(animateBall);
        }

        function hitBall() {
            hits++;
            document.getElementById('hits').innerText = hits;
            ballY -= 25; // Bounce up
            ballX = Math.random() * 60 + 20; // Move side to side

            if(hits >= 5) {
                gameActive = false;
                document.getElementById('vball').style.display = 'none';
                document.getElementById('score-board').style.display = 'none';
                nextPage();
            }
        }

        function createSnow() {
            for (let i = 0; i < 30; i++) {
                let flake = document.createElement('div');
                flake.className = 'snowflake';
                flake.innerText = '❄';
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                flake.style.opacity = Math.random();
                document.body.appendChild(flake);
            }
        }
    </script>
</body>
</html>
